
<script>
    // getPosition
    function xy(x) {
        o = document.getElementById(x);
        var l =o.offsetLeft; var t = o.offsetTop;
        while (o=o.offsetParent)
            l += o.offsetLeft;
        o = document.getElementById(x);
        while (o=o.offsetParent)
            t += o.offsetTop;
        return [l,t];
    }

    // SHOW POP-OVER
    function showPopOver(divID,parentID) {
        // SET THE DIV POSITION
        // SHOW THE DIV ()

        document.getElementById(divID).style.display = "inline-flex";


        var parent_y = parseInt(xy(parentID)[1]);
        var parent_y = parseInt(xy(parentID)[0]);
        var div_height=	parseInt(document.getElementById(divID).offsetHeight);
        var pop_pos = parent_y - div_height - 10;
        //document.getElementById(divID).style.top= pop_pos + 'px' ;
        //document.getElementById(divID).style.left= xy(parentID)[0]+"px" ;  // left is as per parent
        //alert(xy(parentID)[1]);
        //alert(current_y);
        //alert(hi);
        //alert(current_y - hi);
        //alert(top_pos);
        //alert(document.getElementById(divID).style.top);
    }

    // CLOSE POP-OVER
    function closePopOver(divID) {
        // HIDE THE DIV
        document.getElementById(divID).style.display = "none";
    }
</script>

<style>
  .business-item-header{
      text-decoration: underline;
      text-align:center;
      border-width: 1px;
      background-color:#A3D1FF;
      border-style: solid
  }

</style>

<div class="row-fluid business-item-header">
  <div class="span3">
    <span class="text-centered" >
      <%= @shopping_mall.address.address_brief %>
    </span>
    <br>
    <span style="text-decoration: underline; font-size: 10px; ">
      MAP
    </span>

  </div>
  <div class="span6 text-centered">
    <span>
       <h3 style="text-decoration: underline"><%= @shopping_mall.name%></h3>
       <h4> ALL BUSINESS ITEMS</h4>
    </span>
  </div>
  <div class="span3">
    <span class="text-centered">
      <%=link_to "VIEW ALL Business Categories", business_items_path(:shopping_mall_id =>  @shopping_mall.id) %>
      <br/>
    </span >
  </div>
</div>

<div class="row-fluid business-item-header" >
  <div class="span4" >
    <span class="text-centered">
        <%=link_to "MALL LINKS AND MAPS", business_items_path(:shopping_mall_id =>  @shopping_mall.id) %>
    </span>
    <br>
    <span style="text-decoration: underline; font-size: 10px; ">
      MAP
    </span>

  </div>
  <div class="span8 text-centered">
    <span style="text-decoration: underline; font-size: 10px; ">

    </span>
  </div>
</div>


<div class="row-fluid container">

</div>

<style>
    table{
        width:100%;
    }
    td {
        border-style: solid;
        border-width: 1px;
        width: 50%;
    }
</style>

<% @mall_business_items.each do |business_item| %>
   <div class="row-fluid">
     <div class="span8 offset2">
       <%= render :partial => "business_items/business_item_thumbnail_for_mall", :locals => {:business_item => business_item} %>
     </div> <!-- end span6 break -->
     <div>
          <span>
            &nbsp;
          </span>
     </div>
    <% end %>

    </div> <!-- end row-fluid forced-->
    <div></div>

<style>
    table{clear:both;}
    td{clear: both;}
</style>